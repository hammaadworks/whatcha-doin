<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>1</storyId>
    <title>Project Setup and Core Infrastructure</title>
    <status>done</status>
    <generatedAt>2025-11-22</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/1-1-project-setup-and-core-infrastructure.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>As a developer,</asA>
    <iWant>I want the project to have a standardized setup with core dependencies, build system, and basic deployment pipeline,</iWant>
    <soThat>So that all subsequent development can proceed efficiently and consistently.</soThat>
    <tasks>
-   **Task 1: Initialize Next.js Project and Install Dependencies** (AC: #1)
    -   [ ] Subtask 1.1: Execute `npx create-next-app@latest . --typescript --tailwind --eslint --app` to scaffold the project.
    -   [ ] Subtask 1.2: Run `pnpm install` to install all required dependencies.
    -   [ ] Subtask 1.3: Verify `npm run dev` starts the application without errors.
    -   [ ] Subtask 1.4: Confirm a basic "Hello World" or blank page is displayed.
    -   **Testing:** Manual verification of application startup and initial display.
-   **Task 2: Configure Development Tools** (AC: #2)
    -   [ ] Subtask 2.1: Verify `eslint.config.mjs` is present and configured.
    -   [ ] Subtask 2.2: Verify `tailwind.config.ts` is present and configured.
    -   [ ] Subtask 2.3: Verify `tsconfig.json` is present and configured for TypeScript.
    -   **Testing:** Run `npm run lint` and `npx tsc --noEmit` to ensure no errors.
-   **Task 3: Implement Basic CI/CD Pipeline** (AC: #3)
    -   [ ] Subtask 3.1: Create a basic GitHub Actions workflow (`.github/workflows/ci.yml`) for linting and building.
    -   [ ] Subtask 3.2: Configure the workflow to run on push and pull requests to the main branch.
    -   [ ] Subtask 3.3: Ensure the workflow includes steps for `pnpm install`, `npm run lint`, and `npm run build`.
    -   **Testing:** Push a test commit and verify the GitHub Actions workflow runs successfully.
    </tasks>
  </story>

  <acceptanceCriteria>
1.  **Given** a fresh clone of the repository, **When** `npm install` and `npm run dev` are executed, **Then** the application starts without errors and displays a blank page or a basic "Hello World" message.
2.  Essential development tools (ESLint, Prettier, TypeScript) are configured and working.
3.  A basic CI/CD pipeline (e.g., GitHub Actions) is in place for linting and building.
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/PRD.md</path>
        <title>whatcha-do.in - Product Requirements Document</title>
        <section>Executive Summary</section>
        <snippet>For development, Supabase authentication is temporarily bypassed. The application interacts directly with Supabase tables using a hardcoded user_id for all feature development.</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>whatcha-do.in - Product Requirements Document</title>
        <section>Project Classification</section>
        <snippet>whatcha-do.in is a Moderate to High complexity Single Page Application (SPA) built with Next.js in the Personal Productivity / Habit Tracking domain.</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>whatcha-do.in - Product Requirements Document</title>
        <section>Web App Specific Requirements</section>
        <snippet>The project will be a Single Page Application (SPA) built with Next.js, utilizing shadcn/ui and Aceternity UI. It must support real-time synchronization of user data.</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>whatcha-do.in - Product Requirements Document</title>
        <section>Non-Functional Requirements</section>
        <snippet>NFR-1.1: Public profile pages must achieve fast load times. NFR-3.1: Serverless/scalable architecture optimized for free-tier MVP. NFR-4.1: WCAG 2.1 Level AA accessibility compliance.</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>whatcha-do.in - Product Requirements Document</title>
        <section>Implementation Planning</section>
        <snippet>The revised development strategy prioritizes incremental and integrated delivery, aiming to deliver a visible, testable feature integrated directly into the main application with foundational UI first.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Executive Summary</section>
        <snippet>This document outlines architectural decisions for 'whatcha-do.in', a Next.js application using Supabase for backend, deployed on Vercel with GitHub Actions for CI/CD, prioritizing frugality and scalability.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Project Structure</section>
        <snippet>The project adopts a Next.js App Router-based structure with clear separation of concerns, including .github/ for CI/CD, app/, components/, lib/, and supabase/ directories.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Project Initialization</section>
        <snippet>The project is initialized using `npx create-next-app@latest`, providing a foundation with TypeScript, Tailwind CSS, ESLint, and Next.js App Router conventions.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Decision Summary</section>
        <snippet>Key architectural decisions cover Deployment (Vercel), Testing Strategy (Vitest, React Testing Library, Playwright, GitHub Actions), Naming Conventions, and Code Organization.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Development Environment</section>
        <snippet>Details prerequisites (Node.js, pnpm, Git, Docker Desktop) and setup commands (pnpm install, supabase init, supabase start, supabase db push, pnpm dev), and CI/CD with GitHub Actions.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Architecture Decision Records (ADRs)</section>
        <snippet>ADR 001: Project Initialization & Core Stack. ADR 004: Deployment & CI/CD. ADR 012: Testing Strategy. ADR 013: Project Structure.</snippet>
      </doc>
      <doc>
        <path>docs/ux-design-specification.md</path>
        <title>whatcha-do.in UX Design Specification</title>
        <section>Design System Foundation</section>
        <snippet>Primary design system is shadcn/ui for foundational components, complemented by Aceternity UI for animations and "wow" moments. Dual-theme strategy: "Zenith" (light) and "Monolith" (dark).</snippet>
      </doc>
      <doc>
        <path>docs/ux-design-specification.md</path>
        <title>whatcha-do.in UX Design Specification</title>
        <section>Component Strategy</section>
        <snippet>Leverages shadcn/ui for core components, Aceternity UI for animations, and Magic UI for further enhancements, ensuring consistency and rapid development.</snippet>
      </doc>
      <doc>
        <path>docs/ux-design-specification.md</path>
        <title>whatcha-do.in UX Design Specification</title>
        <section>Responsive Design & Accessibility</section>
        <snippet>Application will adhere to WCAG 2.1 Level AA standard, ensuring usability across devices and for individuals with disabilities.</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>whatcha-do.in - Epic Breakdown</title>
        <section>Epic 1: Core Application Foundation & Authenticated Root View</section>
        <snippet>Goal: Establish foundational project infrastructure, implement dev bypass for Supabase data interaction, and lay out basic authenticated UI via public profile slug.</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>whatcha-do.in - Epic Breakdown</title>
        <section>Story 1.1: Project Setup and Core Infrastructure</section>
        <snippet>This story aims to establish a standardized project setup with core dependencies, build system, and a basic deployment pipeline for efficient and consistent development.</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>whatcha-do.in - Epic Breakdown</title>
        <section>Story 1.2: Implement Development Login Bypass</section>
        <snippet>This story focuses on bypassing the full Supabase login flow during local development to quickly test core features using a predefined user session without repeated logins.</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>whatcha-do.in - Epic Breakdown</title>
        <section>Story 1.3: Implement Foundational Dashboard Layout</section>
        <snippet>This story focuses on laying out the fundamental UI for the private dashboard, establishing visual structure for bio, todo list, and habit columns.</snippet>
      </doc>
    </docs>
    <code>
      <artifact>
        <path>.github/workflows/ci.yml</path>
        <kind>workflow</kind>
        <reason>New file for basic CI/CD pipeline (linting, building).</reason>
      </artifact>
      <artifact>
        <path>package.json</path>
        <kind>config</kind>
        <reason>Manages project dependencies and scripts (npm install, npm run dev).</reason>
      </artifact>
      <artifact>
        <path>tsconfig.json</path>
        <kind>config</kind>
        <reason>TypeScript configuration for the project.</reason>
      </artifact>
      <artifact>
        <path>eslint.config.mjs</path>
        <kind>config</kind>
        <reason>ESLint configuration for code quality and linting.</reason>
      </artifact>
      <artifact>
        <path>tailwind.config.ts</path>
        <kind>config</kind>
        <reason>Tailwind CSS configuration for styling.</reason>
      </artifact>
      <artifact>
        <path>next.config.ts</path>
        <kind>config</kind>
        <reason>Next.js configuration for the application.</reason>
      </artifact>
      <artifact>
        <path>postcss.config.mjs</path>
        <kind>config</kind>
        <reason>PostCSS configuration, typically used with Tailwind CSS.</reason>
      </artifact>
    </code>
    <dependencies>
      <ecosystem name="Node.js" manifest="package.json">
        <package name="@radix-ui/react-alert-dialog" version="^1.1.15" type="dependency"/>
        <package name="@radix-ui/react-dialog" version="^1.1.15" type="dependency"/>
        <package name="@radix-ui/react-icons" version="^1.3.2" type="dependency"/>
        <package name="@radix-ui/react-label" version="^2.1.8" type="dependency"/>
        <package name="@radix-ui/react-select" version="^2.2.6" type="dependency"/>
        <package name="@radix-ui/react-slot" version="^1.2.4" type="dependency"/>
        <package name="@radix-ui/react-switch" version="^1.2.6" type="dependency"/>
        <package name="@supabase/ssr" version="^0.7.0" type="dependency"/>
        <package name="@supabase/supabase-js" version="^2.81.1" type="dependency"/>
        <package name="@testing-library/jest-dom" version="^6.9.1" type="dependency"/>
        <package name="@testing-library/react" version="^16.3.0" type="dependency"/>
        <package name="class-variance-authority" version="^0.7.1" type="dependency"/>
        <package name="clsx" version="^2.1.1" type="dependency"/>
        <package name="cobe" version="^0.6.5" type="dependency"/>
        <package name="lucide-react" version="^0.553.0" type="dependency"/>
        <package name="motion" version="^12.23.24" type="dependency"/>
        <package name="next" version="16.0.2" type="dependency"/>
        <package name="next-themes" version="^0.4.6" type="dependency"/>
        <package name="react" version="19.2.0" type="dependency"/>
        <package name="react-dom" version="19.2.0" type="dependency"/>
        <package name="react-hot-toast" version="^2.6.0" type="dependency"/>
        <package name="tailwind-merge" version="^3.4.0" type="dependency"/>
        <package name="tailwindcss-animate" version="^1.0.7" type="dependency"/>
        <package name="zustand" version="^5.0.8" type="dependency"/>
        <package name="@playwright/test" version="^1.56.1" type="devDependency"/>
        <package name="@tailwindcss/postcss" version="^4" type="devDependency"/>
        <package name="@types/node" version="^20.19.25" type="devDependency"/>
        <package name="@types/react" version="^19.2.6" type="devDependency"/>
        <package name="@types/react-dom" version="^19.2.3" type="devDependency"/>
        <package name="eslint" version="^9" type="devDependency"/>
        <package name="eslint-config-next" version="16.0.2" type="devDependency"/>
        <package name="jsdom" version="^27.2.0" type="devDependency"/>
        <package name="tailwindcss" version="^4" type="devDependency"/>
        <package name="tsconfig-paths" version="^4.2.0" type="devDependency"/>
        <package name="tw-animate-css" version="^1.4.0" type="devDependency"/>
        <package name="typescript" version="^5" type="devDependency"/>
        <package name="vitest" version="^4.0.8" type="devDependency"/>
      </ecosystem>
      <frameworks>
        <framework name="Next.js" type="web_framework"/>
        <framework name="React" type="ui_library"/>
        <framework name="TypeScript" type="language"/>
        <framework name="Tailwind CSS" type="styling_framework"/>
        <framework name="ESLint" type="linting_tool"/>
        <framework name="Playwright" type="e2e_testing_framework"/>
        <framework name="Vitest" type="unit_integration_testing_framework"/>
        <framework name="Supabase" type="backend_as_a_service"/>
        <framework name="Zustand" type="state_management_library"/>
        <framework name="Radix UI" type="ui_component_library"/>
        <framework name="Aceternity UI" type="animation_library"/>
        <framework name="shadcn/ui" type="ui_component_library"/>
      </frameworks>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint>Project Initialization: Use Next.js App Router, TypeScript, Tailwind CSS, ESLint (ADR 001).</constraint>
    <constraint>Testing Strategy: Lean MVP with Vitest, React Testing Library, Playwright, integrated with GitHub Actions (ADR 012).</constraint>
    <constraint>SPA Functionality: The application must function as a Single Page Application (FR-6.3).</constraint>
    <constraint>Code Structure: Adhere to Next.js App Router-based structure; frontend components in app/, shared logic in lib/, hooks/, components/, Supabase in supabase/, CI/CD in .github/ (ADR 013).</constraint>
    <constraint>Styling: Primarily use Tailwind CSS.</constraint>
    <constraint>Development Bypass: Development-mode user injection will be implemented (Story 1.2, ADR 016) to facilitate rapid local testing by bypassing the full Supabase authentication flow.</constraint>
  </constraints>
  <interfaces></interfaces>
  <tests>
    <standards>Unit testing uses Vitest and React Testing Library. E2E testing uses Playwright. All tests are integrated with GitHub Actions for CI/CD.</standards>
    <locations>
      <location>tests/unit/</location>
      <location>tests/integration/</location>
      <location>tests/e2e/</location>
    </locations>
    <ideas>
      <idea>Manual verification of application startup and initial display (npm run dev).</idea>
      <idea>Run npm run lint and npx tsc --noEmit to ensure no errors.</idea>
      <idea>Push a test commit and verify the GitHub Actions workflow runs successfully.</idea>
    </ideas>
  </tests>
</story-context>
